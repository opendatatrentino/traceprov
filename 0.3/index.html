<!DOCTYPE html>
<html>
    <head>
        <title>TraceProv</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link id="josman-stylesheet" rel="stylesheet" type="text/css" href="../css/josman.css">
        <!-- <link id="bootstrap-stylesheet" rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
        <link id="bootstrap-theme-stylesheet" rel="stylesheet" type="text/css" href="../css/bootstrap-theme.min.css">
        -->
        <link rel="stylesheet" type="text/css" href="website-template/css/josman.css"> 
        <!--
        <link  rel="stylesheet" type="text/css" href="website-template/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="website-template/css/bootstrap-theme.min.css">
        -->
    </head>
    <body>
        <div id="josman-wrapper">
            <div id="josman-header">

                <div style="position:absolute;  min-height:100px; min-width:100%; ">
                    <a id="josman-program-logo-link" href="../index.html">
                        <img id="josman-program-logo" src="../img/traceprov-logo-200px.png" alt="program logo">    
                    </a>

                    <a id="josman-repo-link" href="../index.html">TraceProv</a>


                    <a href="http://dati.trentino.it/en/" target="_blank">
                        <img style="float:right; padding:10px; width:80px" src="../img/tod-logo.png" alt="organization logo">                        
                    </a>

                    <div id="josman-nav-header">
                        <a id="josman-home" href="../index.html">Home</a>                        
                        <span id="josman-usage" style="margin-left:15px">Usage:                        
                            
                            
                        <a class="josman-version-tab-header josman-tag-selected" href="../0.3/index.html">0.3</a><a class="josman-version-tab-header " href="../0.2/index.html">0.2</a><a class="josman-version-tab-header " href="../0.1/index.html">0.1</a></span>
                        <span style="margin-left:35px">
                            <a id="josman-project" class="josman-external-link" href="https://github.com/opendatatrentino/traceprov" target="_blank">Repo</a>
                            <a id="josman-wiki" class="josman-external-link" href="https://github.com/opendatatrentino/traceprov/wiki" target="_blank">Wiki</a> 
                        </span>
                    </div>
                </div>                

            </div>

            <div id="josman-sidebar">
                <div id="josman-internal-sidebar" class="josman-sidebar-block"><ul class="josman-tree"><li><div class="josman-sidebar-page-title josman-sidebar-selected">Usage</div><ul class="josman-tree"><div><a href="#maven">Maven</a></div><div><a href="#building-objects">Building objects</a></div><div><a href="#dcat">DCAT</a></div><div><a href="#serialization">Serialization</a></div><div><a href="#logging">Logging</a></div></ul></li><li><div class="josman-sidebar-page-title"><a href="CHANGES.html">Release notes</a></div><ul class="josman-tree"></ul></li></ul></div>



                <div id="josman-sidebar-managed-block" class="josman-sidebar-block">

                    <div id="josman-javadoc-link" class="josman-sidebar-page-title"><a class="josman-external-link" href="javadoc/index.html" target="_blank">Javadoc</a></div>
                    <!-- <div><a href="CHANGES.html">Release notes</a></div> -->              
                </div>


            </div>

            <div id="josman-content">
                <div id="josman-internal-content"><h3><a href="#maven" name="maven">Maven</a></h3><p>TraceProv is available on Maven Central. To use it, put this in the dependencies section of your <em>pom.xml</em>:</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;eu.trentorise.opendata&lt;/groupId&gt;
    &lt;artifactId&gt;traceprov&lt;/artifactId&gt;
    &lt;version&gt;0.3.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><p>In case updates are available, version numbers follow <a href="http://semver.org/" target="_blank">semantic versioning</a> rules.</p><h3><a href="#building-objects" name="building-objects">Building objects</a></h3><p>Most objects in TraceProv are immutable, and make heavy use of <a href="https://code.google.com/p/guava-libraries/wiki/ImmutableCollectionsExplained" target="_blank"> Guava immutable collections </a>. In TraceProv, wherever you see a class called <code>ASomething</code>, there will always be an immutable class <code>Something</code> implementing it. </p><p>Immutable classes don't have public constructors, they only have factory methods called <code>of()</code> or <code>builder()</code>. If the class has many fields, it will also provide a mutable Builder to create instances. So for example to build a <em>DcatDataset</em> object setting a fields <em>title</em> and <em>landingPage</em> you would call:</p>
<pre><code>DcatDataset dataset = DcatDataset
                .builder()                
                .setTitle(Dict.of(Locale.ITALIAN, "Impianti di risalita, ViviFiemme 2013"))
                .setLandingPage("http://dati.trentino.it/dataset/impianti-di-risalita-vivifiemme-2013")
                .build();

</code></pre><p>Builder is mutable, while dataset object created after build is perfectly immutable. </p><h3><a href="#dcat" name="dcat">DCAT</a></h3><p><a href="http://www.w3.org/TR/vocab-dcat/" target="_blank">Dcat vocabulary</a> implementation in TraceProv tries to follow <a href="https://joinup.ec.europa.eu/system/files/project/dcat-ap_version_1.1.pdf" target="_blank">DCAT AP 1.1 specs</a>, adapting it to possibly dirty data. For spatial data we use <a href="http://geojson.org/" target="_blank">GeoJson</a> and for temporal data see <a href="https://github.com/opendatatrentino/tod-commons/wiki#dates-and-time" target="_blank">TOD Commons guidelines</a>. </p><h3><a href="#serialization" name="serialization">Serialization</a></h3><p>Serialization to/from Json is done with Jackson. In order to succesfully ser/deserialize TraceProv objects, you first need to register <code>TraceProvModule</code> and other needed modules in your own Jackson <code>ObjectMapper</code>:</p>
<pre><code>	ObjectMapper om = new ObjectMapper();
	om.registerModule(new GuavaModule());
	om.registerModule(new TodCommonsModule());
	om.registerModule(new TraceProvModule()); 
        
	String json = om.writeValueAsString(
    					DcatDataset.builder()
                		.setTitle(Dict.of("hello"))
                .		build());
	System.out.println(json);
	DcatDataset reconstructedDataset = om.readValue(json, DcatDataset.class);
</code></pre><p>Notice we have also registered the necessary <code>Guava</code> (for immutable collections) and <code>Tod Commons</code> modules (for <code>Dict</code> and <code>LocalizedString</code>).<br>To register everything in one command just write:</p>
<pre><code>	ObjectMapper om = new ObjectMapper();
	TraceProvModule.registerModulesInto(om);       
  
</code></pre><h3><a href="#logging" name="logging">Logging</a></h3><p>TraceProv uses native Java logging system (JUL). If you have an application which uses SLF4J logging system and want to see TraceProv logs, you can route logging with <a href="http://mvnrepository.com/artifact/org.slf4j/jul-to-slf4j" target="_blank">JUL to SLF4J bridge</a>, just remember <a href="http://stackoverflow.com/questions/9117030/jul-to-slf4j-bridge" target="_blank"> to programmatically install it first. </a></p></div>
            </div>

        </div>        
        <script src="../js/jquery-1.11.2.min.js"></script>
        <!-- <script src="../js/bootstrap-3.3.4.min.js"></script> -->

        <!-- quick and silly hack to get the file -->
        <script src="website-template/js/jquery-1.11.2.min.js"></script>
        <!-- quick and silly hack to get the file -->
        <script src="website-template/js/jquery-3.3.4.min.js"></script>
        <script>
            // idotic CSS in style doesn't work, so use jquery instead: 
            // also would like pre code but this will select code and won't work. There aren't selectors for parents

            $("pre").css("max-width", "680px").css("overflow-x", "auto");

            /* We don't support this yet...
             $('.josman-tree-toggle').click(function () {
             $(this).parent().children('ul.tree').toggle(200);
             return false;
             });
             */
        </script>
    </body>
</html>
